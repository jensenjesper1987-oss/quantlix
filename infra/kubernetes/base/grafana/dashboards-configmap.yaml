apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards-config
  namespace: quantlix
data:
  default.yaml: |
    apiVersion: 1
    providers:
      - name: 'quantlix'
        orgId: 1
        folder: 'Quantlix'
        type: file
        disableDeletion: false
        editable: true
        options:
          path: /var/lib/grafana/dashboards
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards
  namespace: quantlix
  labels:
    grafana_dashboard: "1"
data:
  quantlix-error-logs.json: |
    {"annotations":{"list":[]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"loki","uid":"loki"},"gridPos":{"h":12,"w":24,"x":0,"y":0},"id":1,"options":{"dedupStrategy":"none","enableLogDetails":true,"prettifyLogMessage":false,"showCommonLabels":false,"showLabels":false,"showTime":true,"sortOrder":"Descending","wrapLogMessage":true},"targets":[{"datasource":{"type":"loki","uid":"loki"},"expr":"{namespace=\"quantlix\"} |~ \"(?i)(error|exception|failed|traceback)\"","refId":"A"}],"title":"Error logs (API, orchestrator, all Quantlix)","type":"logs"},{"datasource":{"type":"loki","uid":"loki"},"gridPos":{"h":8,"w":12,"x":0,"y":12},"id":2,"options":{"dedupStrategy":"none","enableLogDetails":true,"prettifyLogMessage":false,"showCommonLabels":false,"showLabels":false,"showTime":true,"sortOrder":"Descending","wrapLogMessage":true},"targets":[{"datasource":{"type":"loki","uid":"loki"},"expr":"{namespace=\"quantlix\", app=\"api\"} |~ \"(?i)(error|exception|failed)\"","refId":"A"}],"title":"API errors","type":"logs"},{"datasource":{"type":"loki","uid":"loki"},"gridPos":{"h":8,"w":12,"x":12,"y":12},"id":3,"options":{"dedupStrategy":"none","enableLogDetails":true,"prettifyLogMessage":false,"showCommonLabels":false,"showLabels":false,"showTime":true,"sortOrder":"Descending","wrapLogMessage":true},"targets":[{"datasource":{"type":"loki","uid":"loki"},"expr":"{namespace=\"quantlix\", app=\"orchestrator\"} |~ \"(?i)(error|exception|failed)\"","refId":"A"}],"title":"Orchestrator errors","type":"logs"},{"datasource":{"type":"loki","uid":"loki"},"gridPos":{"h":10,"w":24,"x":0,"y":20},"id":4,"options":{"dedupStrategy":"none","enableLogDetails":true,"prettifyLogMessage":false,"showCommonLabels":false,"showLabels":false,"showTime":true,"sortOrder":"Descending","wrapLogMessage":true},"targets":[{"datasource":{"type":"loki","uid":"loki"},"expr":"{namespace=\"quantlix\"}","refId":"A"}],"title":"All logs (filter as needed)","type":"logs"}],"refresh":"30s","schemaVersion":39,"style":"dark","tags":["quantlix","logs","errors"],"templating":{"list":[{"current":{"selected":true,"text":"Loki","value":"loki"},"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"datasource","options":[],"query":"loki","queryValue":"","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource","datasource":{"type":"grafana-datasources","uid":"-- Grafana --"}}]},"time":{"from":"now-1h","to":"now"},"timepicker":{},"timezone":"","title":"Quantlix Error Logs","uid":"quantlix-error-logs","version":1}
